<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    (function () {
      try {
        var theme = localStorage.getItem('funds_theme');
        if (theme) document.documentElement.setAttribute('data-theme', theme);
      } catch (e) {}
    })();
  </script>
  <title>Member Profile | Funds 4 Furry Friends</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/team.css">
  <style>
    .member-profile-shell {
      --profile-accent-rgb: 148, 163, 184;
      --profile-accent: #94A3B8;
      display: grid;
      gap: var(--spacing-xl);
    }

    .member-profile-shell.is-profile-pending {
      visibility: hidden;
    }

    .member-profile-shell.profile-theme-loading {
      --profile-accent-rgb: 148, 163, 184;
      --profile-accent: #94A3B8;
    }

    .member-profile-shell.profile-theme-admin {
      --profile-accent-rgb: 217, 119, 6;
      --profile-accent: #D97706;
    }

    .member-profile-shell.profile-theme-member {
      --profile-accent-rgb: 37, 99, 235;
      --profile-accent: #2563EB;
    }

    .member-profile-shell.profile-theme-visitor {
      --profile-accent-rgb: 148, 163, 184;
      --profile-accent: #94A3B8;
    }

    .profile-hero-card {
      position: relative;
      overflow: visible;
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-color);
      background:
        radial-gradient(circle at 20% 0%, rgba(var(--profile-accent-rgb), 0.24), transparent 58%),
        radial-gradient(circle at 85% 15%, rgba(59, 130, 246, 0.14), transparent 52%),
        var(--surface-card);
      box-shadow: var(--shadow-card);
      padding: 0;
    }

    .profile-hero-banner {
      height: 132px;
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      background:
        linear-gradient(135deg, rgba(var(--profile-accent-rgb), 0.30), rgba(59, 130, 246, 0.14)),
        linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0));
      border-bottom: 1px solid var(--border-color);
    }

    .profile-hero-body {
      position: relative;
      padding: 0 var(--spacing-xl) var(--spacing-xl) calc(var(--spacing-xl) + 170px);
      min-height: 150px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--spacing-lg);
    }

    .profile-hero-avatar-wrap {
      position: absolute;
      left: var(--spacing-xl);
      top: -58px;
      width: 148px;
      text-align: center;
    }

    .profile-hero-avatar-wrap #memberAvatarPreview {
      width: 148px;
      height: 148px;
      border-radius: 50%;
      border: 4px solid var(--surface-card);
      background: var(--surface-card);
      box-shadow: var(--shadow-card);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      margin: 0 auto 8px;
    }

    .profile-hero-avatar-wrap #memberAvatarPreview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .profile-hero-avatar-wrap .avatar-placeholder {
      width: 100%;
      height: 100%;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .profile-photo-link {
      font-size: 0.875rem;
      color: var(--profile-accent);
      text-decoration: none;
      font-weight: 600;
    }

    .profile-photo-link:hover {
      text-decoration: underline;
    }

    .profile-hero-meta-label {
      margin: 0 0 6px;
      font-size: 0.85rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-muted);
      font-weight: 700;
    }

    .profile-hero-name {
      margin: 0;
      font-family: var(--font-display, inherit);
      font-size: clamp(1.6rem, 3vw, 2.2rem);
      line-height: 1.1;
    }

    .profile-hero-subline {
      margin: 10px 0 0;
      color: var(--text-secondary);
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    .profile-hero-pill {
      display: inline-flex;
      align-items: center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(var(--profile-accent-rgb), 0.55);
      background: rgba(var(--profile-accent-rgb), 0.18);
      color: var(--text-primary);
      font-size: 0.8rem;
      font-weight: 600;
    }

    .profile-hero-actions {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .member-profile-content {
      display: grid;
      gap: var(--spacing-xl);
      grid-template-columns: minmax(0, 1.55fr) minmax(300px, 1fr);
      align-items: start;
    }

    .member-profile-main,
    .member-profile-side {
      display: grid;
      gap: var(--spacing-xl);
    }

    .profile-section-card .card-header {
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
    }

    .profile-section-subtitle {
      margin: 0;
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    .profile-form-grid {
      display: grid;
      gap: 14px 16px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .profile-form-grid .input-group.full-width {
      grid-column: 1 / -1;
    }

    .profile-stat-strip {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
    }

    .profile-stat {
      border-radius: 14px;
      border: 1px solid var(--border-color);
      background: var(--surface-elevated, rgba(255,255,255,0.02));
      padding: 12px 14px;
    }

    .profile-stat-label {
      margin: 0 0 4px;
      font-size: 0.75rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 700;
    }

    .profile-stat-value {
      margin: 0;
      font-size: 1rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .hidden-file-input {
      position: absolute;
      width: 1px;
      height: 1px;
      opacity: 0;
      pointer-events: none;
    }

    @media (max-width: 980px) {
      .member-profile-content {
        grid-template-columns: 1fr;
      }

      .profile-hero-body {
        padding: 84px var(--spacing-lg) var(--spacing-lg);
        min-height: 0;
        flex-direction: column;
        align-items: flex-start;
      }

      .profile-hero-avatar-wrap {
        position: absolute;
        left: var(--spacing-lg);
        top: -52px;
        width: 124px;
      }

      .profile-hero-avatar-wrap #memberAvatarPreview {
        width: 124px;
        height: 124px;
      }

      .profile-hero-actions {
        justify-content: flex-start;
      }
    }

    @media (max-width: 640px) {
      .profile-form-grid,
      .profile-stat-strip {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <nav class="topbar">
    <div class="topbar-left">
      <button class="menu-toggle" id="menuToggle"><span></span><span></span><span></span></button>
      <div class="brand"><span class="brand-icon">üêæ</span><span class="brand-name">Funds 4 Furry Friends</span></div>
    </div>
    <div class="topbar-center">
      <div class="search-bar"><span class="search-icon">üîç</span><input type="text" placeholder="Search..." class="search-input"></div>
    </div>
    <div class="topbar-right">
      <button class="icon-btn"><span class="notification-badge">3</span>üîî</button>
      <button class="icon-btn"><span class="notification-badge">5</span>üí¨</button>
      <div class="user-menu"><img src="https://i.pravatar.cc/150?img=12" alt="User" class="user-avatar"><span class="user-name">Admin</span></div>
    </div>
  </nav>

  <aside class="sidebar" id="sidebar">
    <nav class="sidebar-nav">
      <a href="index.html" class="nav-item"><span class="nav-icon">üìä</span><span class="nav-label">Dashboard</span></a>
      <a href="campaigns.html" class="nav-item"><span class="nav-icon">üéØ</span><span class="nav-label">Active Campaigns</span></a>
      <a href="donors.html" class="nav-item"><span class="nav-icon">‚ù§Ô∏è</span><span class="nav-label">Donors & Sponsors</span></a>
      <a href="analytics.html" class="nav-item"><span class="nav-icon">üìà</span><span class="nav-label">Analytics & Reports</span></a>
      <a href="animals.html" class="nav-item"><span class="nav-icon">üêï</span><span class="nav-label">Animals Helped</span></a>
      <a href="events.html" class="nav-item"><span class="nav-icon">üìÖ</span><span class="nav-label">Events Calendar</span></a>
      <a href="communications.html" class="nav-item"><span class="nav-icon">üìß</span><span class="nav-label">Communications</span></a>
      <a href="stories.html" class="nav-item"><span class="nav-icon">‚ú®</span><span class="nav-label">Success Stories</span></a>
    </nav>
    <div class="sidebar-footer">
      <a href="settings.html" class="nav-item"><span class="nav-icon">‚öôÔ∏è</span><span class="nav-label">Settings</span></a>
      <a href="team.html" class="nav-item active"><span class="nav-icon">üë•</span><span class="nav-label">Team Management</span></a>
      <a href="help.html" class="nav-item"><span class="nav-icon">‚ùì</span><span class="nav-label">Help & Resources</span></a>
    </div>
  </aside>

  <main class="main-content">
    <div class="container">
      <div class="member-profile-shell profile-theme-loading is-profile-pending" id="memberProfileShell">
        <section class="profile-hero-card" aria-labelledby="memberProfileHeaderName">
          <div class="profile-hero-banner"></div>
          <div class="profile-hero-body">
            <div class="profile-hero-avatar-wrap">
              <div id="memberAvatarPreview"><div class="avatar avatar-md avatar-placeholder">TM</div></div>
              <a href="#" class="profile-photo-link" id="memberChangePhotoLink">Change profile picture</a>
              <input class="hidden-file-input" type="file" id="memberPhotoFile" accept="image/*">
            </div>

            <div class="profile-hero-copy">
              <p class="profile-hero-meta-label">User Profile For:</p>
              <h1 class="profile-hero-name" id="memberProfileHeaderName">Loading member...</h1>
              <div class="profile-hero-subline">
                <span class="profile-hero-pill" id="memberProfileRolePill">Role</span>
                <span class="profile-hero-pill" id="memberProfileStatusPill">Status</span>
                <span id="memberProfileSubtitle">View and manage team member information</span>
              </div>
            </div>

            <div class="profile-hero-actions">
              <a href="team.html" class="btn btn-secondary">Back to Team</a>
              <button class="btn btn-secondary" id="memberDeleteBtn">Remove Member</button>
              <button class="btn btn-primary" id="memberSaveBtn">Save Profile</button>
            </div>
          </div>
        </section>

        <div class="member-profile-content">
          <div class="member-profile-main">
            <div class="card profile-section-card">
              <div class="card-header">
                <h2 class="card-title">Profile Details</h2>
                <p class="profile-section-subtitle">Core member information and organization role</p>
              </div>
              <div class="card-body">
                <form id="memberProfileForm" class="form">
                  <input type="hidden" name="id">
                  <input type="hidden" name="avatar_url">

                  <div class="profile-form-grid">
                    <div class="input-group">
                      <label class="input-label">Full Name</label>
                      <input class="input" name="full_name" required>
                    </div>
                    <div class="input-group">
                      <label class="input-label">Email</label>
                      <input class="input" type="email" name="email" required>
                    </div>
                    <div class="input-group">
                      <label class="input-label">Role</label>
                      <select class="select" name="role">
                        <option value="administrator">Administrator</option>
                        <option value="editor">Member</option>
                        <option value="viewer">Visitor</option>
                      </select>
                    </div>
                    <div class="input-group">
                      <label class="input-label">Status</label>
                      <select class="select" name="status">
                        <option value="active">Active</option>
                        <option value="invited">Invited</option>
                        <option value="inactive">Inactive</option>
                      </select>
                    </div>
                    <div class="input-group full-width">
                      <label class="input-label">Title</label>
                      <input class="input" name="title" placeholder="Development Coordinator">
                    </div>
                    <div class="input-group">
                      <label class="input-label">Joined Date</label>
                      <input class="input" type="date" name="joined_at_date">
                    </div>
                  </div>
                </form>
              </div>
            </div>

            <div class="card profile-section-card">
              <div class="card-header">
                <h2 class="card-title">Access & Login</h2>
                <p class="profile-section-subtitle">Account credentials and profile access controls</p>
              </div>
              <div class="card-body">
                <form id="memberAccountForm" class="form">
                  <div class="profile-form-grid">
                    <div class="input-group">
                      <label class="input-label">Login Email</label>
                      <input class="input" name="account_email" type="email">
                    </div>
                    <div class="input-group">
                      <label class="input-label">Reset Password (optional)</label>
                      <input class="input" name="account_password" type="password" placeholder="Leave blank to keep current">
                    </div>
                    <div class="input-group full-width">
                      <label class="input-label">Notes</label>
                      <p class="text-muted text-caption" style="margin:0;">Administrators can manage any profile. Members can edit only their own profile and view others read-only.</p>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <aside class="member-profile-side">
            <div class="card profile-section-card">
              <div class="card-header">
                <h2 class="card-title">Account Snapshot</h2>
                <p class="profile-section-subtitle">Quick profile summary</p>
              </div>
              <div class="card-body">
                <div class="profile-stat-strip">
                  <div class="profile-stat">
                    <p class="profile-stat-label">Role</p>
                    <p class="profile-stat-value" id="memberProfileStatRole">-</p>
                  </div>
                  <div class="profile-stat">
                    <p class="profile-stat-label">Status</p>
                    <p class="profile-stat-value" id="memberProfileStatStatus">-</p>
                  </div>
                  <div class="profile-stat">
                    <p class="profile-stat-label">Member for</p>
                    <p class="profile-stat-value" id="memberProfileStatJoined">-</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="card profile-section-card">
              <div class="card-header">
                <h2 class="card-title">Profile Access</h2>
                <p class="profile-section-subtitle">Current edit permissions for this page</p>
              </div>
              <div class="card-body">
                <p class="text-muted text-caption" id="memberProfileModeLabel">Loading profile...</p>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>
  </main>

  <script src="js/main.js"></script>
  <script src="js/member-profile.js"></script>
</body>
</html>
